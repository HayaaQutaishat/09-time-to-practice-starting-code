"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[857],{857:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n(791),c=n(880),r=n(523),o=n(152),a=n(995),m="Comments_comments__9cxIN",d=n(853),i="NewCommentForm_form__C3cQf",l="NewCommentForm_control__iR6jS",u="NewCommentForm_actions__NC323",x=n(556),h=n(184),j=function(e){var t=(0,s.useRef)(),n=(0,c.UO)(),r=(0,a.Z)(d.Ir),o=r.sendRequest,m=r.status,j=r.error,f=n.quoteId,_=e.onDoneAddComment;(0,s.useEffect)((function(){"completed"!==m||j||_()}),[m,j,_]);var N=function(e){e.preventDefault();var n=t.current.value;o({commentData:{text:n},quoteId:f})};return(0,h.jsxs)("form",{className:i,onSubmit:N,children:["pending"===m&&(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)(x.Z,{})}),(0,h.jsxs)("div",{className:l,onSubmit:N,children:[(0,h.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),(0,h.jsx)("textarea",{id:"comment",rows:"5",ref:t})]}),(0,h.jsx)("div",{className:u,children:(0,h.jsx)("button",{className:"btn",children:"Add Comment"})})]})},f="CommentItem_item__+vwzS",_=function(e){return(0,h.jsx)("li",{className:f,children:(0,h.jsx)("p",{children:e.text})})},N="CommentsList_comments__UVWAR",p=function(e){return(0,h.jsx)("ul",{className:N,children:e.comments.map((function(e){return(0,h.jsx)(_,{text:e.text},e.id)}))})},C=function(){var e=(0,s.useState)(!1),t=(0,o.Z)(e,2),n=t[0],r=t[1],i=(0,a.Z)(d.h_,!0),l=i.sendRequest,u=i.data,f=i.status,_=(0,c.UO)().quoteId;(0,s.useEffect)((function(){l(_)}),[_,l]);var N,C=(0,s.useCallback)((function(){l(_)}),[_,l]);return"pending"===f&&(N=(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)(x.Z,{})})),"completed"!==f||u&&0!==u.length||(N=(0,h.jsx)("p",{className:"centered",children:"No Comments were added yet!"})),"completed"===f&&u&&u.length>0&&(N=(0,h.jsx)(p,{comments:u})),(0,h.jsxs)("section",{className:m,children:[(0,h.jsx)("h2",{children:"User Comments"}),!n&&(0,h.jsx)("button",{className:"btn",onClick:function(){r(!0)},children:"Add a Comment"}),n&&(0,h.jsx)(j,{onDoneAddComment:C}),N]})},v="HighlightedQuote_quote__dE8qA",g=function(e){return(0,h.jsxs)("figure",{className:v,children:[(0,h.jsx)("p",{children:e.text}),(0,h.jsx)("figcaption",{children:e.author})]})},b=function(){var e=(0,c.UO)(),t=(0,c.$B)(),n=(0,a.Z)(d.jR,!0),o=n.sendRequest,m=n.data,i=n.status,l=n.error,u=e.quoteId;return(0,s.useEffect)((function(){o(u)}),[o,u]),"pending"===i?(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)(x.Z,{})}):l?(0,h.jsx)("div",{className:"centered",children:l}):m.text?(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(g,{text:m.text,author:m.author}),(0,h.jsx)(c.AW,{path:t.path,exact:!0,children:(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)(r.rU,{className:"btn--flat",to:"".concat(t.url,"/comments"),children:"Load Comments"})})}),(0,h.jsx)(c.AW,{path:"".concat(t.path,"/comments"),children:(0,h.jsx)(C,{})})]}):(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)("h1",{children:"No Quote Found!"})})}}}]);
//# sourceMappingURL=857.c9f91bce.chunk.js.map